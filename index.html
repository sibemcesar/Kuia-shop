<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Kuia+ Shop — Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Fonte elegante -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#0f172a;      /* slate-900 */
      --bg2:#1e293b;      /* slate-800 */
      --ac1:#2563eb;      /* blue-600 */
      --ac2:#22d3ee;      /* cyan-400 */
      --ac3:#f97316;      /* orange-500 */
      --ok:#10b981;       /* green-500 */
      --err:#ef4444;      /* red-500 */
      --txt:#e5e7eb;      /* slate-200 */
      --mut:#94a3b8;      /* slate-400 */
      --glass-bg: rgba(255,255,255,0.08);
      --glass-br: 16px;
      --shadow: 0 20px 50px rgba(0,0,0,0.35);
    }

    /* Fundo animado com gradiente e brilho suave */
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color: var(--txt);
      min-height: 100vh;
      display: grid;
      place-items: center;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(37, 99, 235,0.25), transparent 60%),
        radial-gradient(1000px 500px at 90% 20%, rgba(34, 211, 238,0.25), transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow: hidden;
    }

    /* Partículas decorativas */
    .orb {
      position: absolute;
      width: 300px; height: 300px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.5), transparent 60%);
      filter: blur(40px);
      border-radius: 50%;
      animation: float 12s ease-in-out infinite;
      opacity: 0.15;
      pointer-events: none;
    }
    .orb.o1 { top: 10%; left: 5%; animation-delay: 0s; }
    .orb.o2 { bottom: 8%; right: 10%; animation-delay: 3s; }
    .orb.o3 { top: 60%; left: 20%; animation-delay: 6s; }

    @keyframes float {
      0%,100% { transform: translate(0,0) scale(1); }
      50%     { transform: translate(20px,-30px) scale(1.08); }
    }

    /* Container com glassmorphism */
    .card {
      width: 360px;
      max-width: 92vw;
      background: var(--glass-bg);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: var(--glass-br);
      box-shadow: var(--shadow);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      overflow: hidden;
    }

    .card-header {
      padding: 20px 20px 12px;
      display: flex;
      align-items: center;
      gap: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .brand {
      display: inline-flex; align-items: center; gap: 8px;
      font-weight: 700; letter-spacing: 0.3px;
    }
    .brand-badge {
      width: 28px; height: 28px; border-radius: 8px;
      background: linear-gradient(135deg, var(--ac1), var(--ac2));
      display: grid; place-items: center;
      box-shadow: 0 10px 25px rgba(34, 211, 238,0.35);
    }
    .brand-badge svg { width: 18px; height: 18px; }

    .card-body {
      padding: 18px 20px 4px;
    }

    .subtitle {
      margin: 0 0 12px; font-size: 14px; color: var(--mut);
    }

    .input {
      width: 100%;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.16);
      color: var(--txt);
      border-radius: 10px;
      padding: 10px 12px;
      margin: 8px 0;
      outline: none;
      transition: border-color .2s, transform .06s;
    }
    .input:focus {
      border-color: rgba(34, 211, 238,0.7);
      transform: translateY(-1px);
    }

    .btn {
      width: 100%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 10px 12px;
      margin: 8px 0;
      border: none;
      border-radius: 12px;
      color: white;
      cursor: pointer;
      transition: transform .08s ease, box-shadow .2s ease, filter .3s ease;
      background: linear-gradient(135deg, var(--ac1), var(--ac2));
      box-shadow: 0 12px 30px rgba(37, 99, 235,0.35);
    }
    .btn:hover { transform: translateY(-1px); filter: brightness(1.05); }
    .btn:active { transform: translateY(0px) scale(0.99); }

    .btn.secondary {
      background: linear-gradient(135deg, #7c3aed, #22d3ee);
      box-shadow: 0 12px 30px rgba(124, 58, 237,0.35);
    }
    .btn.neutral {
      background: linear-gradient(135deg, #334155, #64748b);
      box-shadow: 0 12px 30px rgba(100, 116, 139,0.35);
    }

    .provider-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin: 8px 0 4px;
    }

    .divider {
      margin: 14px 0 10px;
      display: flex; align-items: center; gap: 10px; color: var(--mut); font-size: 12px;
    }
    .divider::before, .divider::after {
      content: "";
      height: 1px;
      flex: 1;
      background: rgba(255,255,255,0.14);
    }

    /* Área do usuário logado */
    .profile {
      padding: 14px 20px 18px;
      border-top: 1px solid rgba(255,255,255,0.1);
      display: none;
      animation: fadeIn .35s ease forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .userbar {
      display: grid; grid-template-columns: 64px 1fr auto; gap: 12px; align-items: center;
    }
    .avatar {
      width: 64px; height: 64px; border-radius: 16px; overflow: hidden;
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: 0 8px 22px rgba(0,0,0,0.25);
    }
    .avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .userinfo {
      display: flex; flex-direction: column; gap: 4px;
    }
    .name { font-weight: 700; }
    .email { font-size: 12px; color: var(--mut); }

    .logout {
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.06);
      color: var(--txt);
      cursor: pointer;
      transition: background .2s, transform .08s;
    }
    .logout:hover { background: rgba(255,255,255,0.1); transform: translateY(-1px); }

    /* Toasts */
    .toast {
      position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%) translateY(30px);
      background: rgba(22, 163, 74, 0.9); /* green */
      color: white;
      padding: 10px 14px;
      border-radius: 10px;
      box-shadow: var(--shadow);
      font-size: 14px;
      opacity: 0;
      transition: opacity .25s, transform .25s;
      z-index: 50;
    }
    .toast.error { background: rgba(239, 68, 68, 0.92); } /* red */
    .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

    /* Loader discreto */
    .loader {
      width: 22px; height: 22px; border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.35);
      border-top-color: white;
      animation: spin .9s linear infinite;
    }
    @keyframes spin { to { transform: rotate(1turn); } }

    /* Nota sutil */
    .note {
      padding: 0 20px 18px; font-size: 12px; color: var(--mut);
    }
    .note b { color: #cbd5e1; }
  </style>
</head>
<body>

  <!-- Orbs decorativos -->
  <div class="orb o1"></div>
  <div class="orb o2"></div>
  <div class="orb o3"></div>

  <div class="card">
    <div class="card-header">
      <div class="brand-badge">
        <!-- Ícone simples -->
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M5 12l4.5 4.5L19 7" stroke="white" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="brand">Kuia+ Shop</div>
    </div>

    <div class="card-body">
      <p class="subtitle">Entre com a sua conta ou teste login anônimo.</p>

      <input class="input" type="email" id="email" placeholder="Email">
      <input class="input" type="password" id="password" placeholder="Senha">

      <button class="btn" id="emailLogin">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M4 6h16v12H4z" stroke="white" stroke-width="1.6"/>
          <path d="M4 6l8 7 8-7" stroke="white" stroke-width="1.6"/>
        </svg>
        Entrar com Email
      </button>
      <button class="btn neutral" id="emailSignup">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M12 5v14M5 12h14" stroke="white" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Criar Conta com Email
      </button>

      <div class="divider">ou</div>

      <div class="provider-row">
        <button class="btn secondary" id="googleLogin">
          <svg width="18" height="18" viewBox="0 0 24 24">
            <path fill="#fff" d="M21.35 11.1h-9.17v2.98h5.3c-.23 1.38-1.28 3.05-3.77 3.05-2.27 0-4.12-1.88-4.12-4.2s1.85-4.2 4.12-4.2c1.3 0 2.17.55 2.67 1.03l2.03-1.97C17.48 6.7 16.02 6 14.25 6 10.61 6 7.64 8.92 7.64 12.53c0 3.61 2.97 6.53 6.61 6.53 3.82 0 6.34-2.68 6.34-6.45 0-.44-.05-.86-.14-1.26z"/>
          </svg>
          Google
        </button>
        <button class="btn secondary" id="facebookLogin">
          <svg width="18" height="18" viewBox="0 0 24 24">
            <path fill="#fff" d="M13 20v-6h2.09l.31-2.62H13V9.5c0-.76.25-1.28 1.47-1.28H15.5V6.02C15.24 6 14.41 6 13.5 6c-2.22 0-3.5 1.25-3.5 3.54v1.84H8v2.62h2v6H13z"/>
          </svg>
          Facebook
        </button>
      </div>

      <button class="btn neutral" id="anonLogin">
        <svg width="18" height="18" viewBox="0 0 24 24">
          <circle cx="12" cy="8" r="3.6" fill="white"/>
          <path d="M4.2 19c1.6-3.4 4.6-5.3 7.8-5.3s6.2 1.9 7.8 5.3" fill="none" stroke="white" stroke-width="1.6"/>
        </svg>
        Entrar como Anônimo
      </button>
    </div>

    <div class="profile" id="profile">
      <div class="userbar">
        <div class="avatar"><img id="userAvatar" src="https://via.placeholder.com/128" alt="Avatar"></div>
        <div class="userinfo">
          <div class="name" id="userName">Usuário</div>
          <div class="email" id="userEmail"></div>
        </div>
        <button class="logout" id="logout">
          <span style="display:inline-flex;align-items:center;gap:6px;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M10 17l5-5-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M4 12h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg> Sair
          </span>
        </button>
      </div>
    </div>

    <div class="note">
      Dica: rode este arquivo em servidor (HTTP/HTTPS). Abrir via <b>file://</b> não funciona com Auth.
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <script type="module">
    // Firebase SDKs via CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getAuth,
      GoogleAuthProvider,
      FacebookAuthProvider,
      signInWithPopup,
      signInAnonymously,
      signInWithEmailAndPassword,
      createUserWithEmailAndPassword,
      signOut,
      onAuthStateChanged,
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    // Config Firebase (com storageBucket corrigido)
    const firebaseConfig = {
      apiKey: "AIzaSyArmhNnjraGaY017AP5uRcM8w0WWditrIs",
      authDomain: "kuia-shop.firebaseapp.com",
      projectId: "kuia-shop",
      storageBucket: "kuia-shop.appspot.com",
      messagingSenderId: "53786495493",
      appId: "1:53786495493:web:85fa67bd5de1d351b1ea6c",
      measurementId: "G-LTZ8VLN3LN"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const googleProvider = new GoogleAuthProvider();
    const facebookProvider = new FacebookAuthProvider();

    // Elements
    const emailEl = document.getElementById("email");
    const passEl  = document.getElementById("password");
    const profile = document.getElementById("profile");
    const userName = document.getElementById("userName");
    const userEmail = document.getElementById("userEmail");
    const userAvatar = document.getElementById("userAvatar");
    const toastEl = document.getElementById("toast");

    // Toast helpers
    function showToast(msg, type="ok") {
      toastEl.textContent = msg;
      toastEl.classList.remove("error");
      if(type === "error") toastEl.classList.add("error");
      toastEl.classList.add("show");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => toastEl.classList.remove("show"), 2800);
    }

    // Buttons handlers
    document.getElementById("emailLogin").onclick = async () => {
      const email = emailEl.value.trim();
      const pass  = passEl.value.trim();
      if(!email || !pass) return showToast("Informe email e senha.", "error");
      try {
        await signInWithEmailAndPassword(auth, email, pass);
        showToast("Login realizado!");
      } catch (e) {
        showToast(e.message, "error");
      }
    };

    document.getElementById("emailSignup").onclick = async () => {
      const email = emailEl.value.trim();
      const pass  = passEl.value.trim();
      if(!email || !pass) return showToast("Informe email e senha.", "error");
      try {
        await createUserWithEmailAndPassword(auth, email, pass);
        showToast("Conta criada com sucesso!");
      } catch (e) {
        showToast(e.message, "error");
      }
    };

    document.getElementById("googleLogin").onclick = async () => {
      try {
        await signInWithPopup(auth, googleProvider);
        showToast("Login Google OK!");
      } catch (e) {
        showToast(e.message, "error");
      }
    };

    document.getElementById("facebookLogin").onclick = async () => {
      try {
        await signInWithPopup(auth, facebookProvider);
        showToast("Login Facebook OK!");
      } catch (e) {
        showToast(e.message, "error");
      }
    };

    document.getElementById("anonLogin").onclick = async () => {
      try {
        await signInAnonymously(auth);
        showToast("Sessão anônima iniciada.");
      } catch (e) {
        showToast(e.message, "error");
      }
    };

    document.getElementById("logout").onclick = async () => {
      try {
        await signOut(auth);
        showToast("Sessão encerrada.");
      } catch (e) {
        showToast(e.message, "error");
      }
    };

    // Auth state
    onAuthStateChanged(auth, (user) => {
      if (user) {
        profile.style.display = "block";
        userName.textContent = user.displayName || "Usuário Anônimo";
        userEmail.textContent = user.email || "Sem e-mail";
        userAvatar.src = user.photoURL || "https://via.placeholder.com/128";
      } else {
        profile.style.display = "none";
        userName.textContent = "Usuário";
        userEmail.textContent = "";
        userAvatar.src = "https://via.placeholder.com/128";
      }
    });
  </script>
</body>
</html>